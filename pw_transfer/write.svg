<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="720" viewBox="0 0 585 720" style="background-color:#fff"><defs id="defs_block"><filter id="filter_blur" width="1.157" height="1.504" x="-.079" y="-.252"><feGaussianBlur id="feGaussianBlur3780" stdDeviation="4.2"/></filter></defs><title>blockdiag</title><desc/><rect style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="8" height="558" x="178" y="140" fill="#000"/><rect style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="8" height="558" x="370" y="140" fill="#000"/><polygon fill="#000" stroke="#000" points="27 126 158 126 166 134 166 154 27 154 27 126" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="#000" stroke="#000" points="390 194 564 194 572 202 572 274 390 274 390 194" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="#000" stroke="#000" points="39 314 158 314 166 322 166 368 39 368 39 314" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="#000" stroke="#000" points="390 408 552 408 560 416 560 488 390 488 390 408" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="#000" stroke="#000" points="39 528 158 528 166 536 166 582 39 582 39 528" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="#000" stroke="#000" points="390 623 473 623 481 631 481 651 390 651 390 623" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><rect style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" height="40" x="118" y="46" fill="#000" stroke="#000"/><rect style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" height="40" x="310" y="46" fill="#000" stroke="#000"/><path fill="none" stroke="#000" stroke-dasharray="8 4" d="M 179 80 L 179 708"/><rect width="8" height="558" x="175" y="134" fill="#ffe4b5" stroke="#000"/><path fill="none" stroke="#000" stroke-dasharray="8 4" d="M 371 80 L 371 708"/><rect width="8" height="558" x="367" y="134" fill="#ffe4b5" stroke="#000"/><rect width="128" height="40" x="115" y="40" fill="#FFF" stroke="#000"/><text x="179" y="66" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">client</text><rect width="128" height="40" x="307" y="40" fill="#FFF" stroke="#000"/><text x="371" y="66" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">server</text><path fill="none" stroke="#000" d="M 187 134 L 363 134"/><polygon fill="#000" stroke="#000" points="355 130 363 134 355 138"/><polygon fill="#F0F8FF" stroke="#000" points="24 120 155 120 163 128 163 148 24 148 24 120"/><path fill="none" stroke="#000" d="M 155 120 L 155 128"/><path fill="none" stroke="#000" d="M 155 128 L 163 128"/><text x="65" y="133" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="89" y="146" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="115">type=TRANSFER_START</text><path fill="none" stroke="#000" d="M 187 228 L 363 228"/><polygon fill="#000" stroke="#000" points="195 224 187 228 195 232"/><polygon fill="#F0F8FF" stroke="#000" points="387 188 561 188 569 196 569 268 387 268 387 188"/><path fill="none" stroke="#000" d="M 561 188 L 561 196"/><path fill="none" stroke="#000" d="M 561 196 L 569 196"/><text x="428" y="201" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="413" y="214" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">offset</text><text x="446" y="227" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="103">window_end_offset</text><text x="474" y="240" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="158">type=PARAMETERS_RETRANSMIT</text><text x="437" y="253" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="85">max_chunk_size</text><text x="428" y="266" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">chunk_delay</text><path fill="none" stroke="#000" stroke-dasharray="4" d="M 187 335 L 363 335"/><polygon fill="#000" stroke="#000" points="355 331 363 335 355 339"/><polygon fill="#F0F8FF" stroke="#000" points="36 308 155 308 163 316 163 362 36 362 36 308"/><path fill="none" stroke="#000" d="M 155 308 L 155 316"/><path fill="none" stroke="#000" d="M 155 316 L 163 316"/><text x="77" y="321" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="62" y="334" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">offset</text><text x="56" y="347" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="25">data</text><text x="95" y="360" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="103">(remaining_bytes)</text><path fill="none" stroke="#000" stroke-dasharray="4" d="M 187 442 L 363 442"/><polygon fill="#000" stroke="#000" points="195 438 187 442 195 446"/><polygon fill="#F0F8FF" stroke="#000" points="387 402 549 402 557 410 557 482 387 482 387 402"/><path fill="none" stroke="#000" d="M 549 402 L 549 410"/><path fill="none" stroke="#000" d="M 549 410 L 557 410"/><text x="428" y="415" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="413" y="428" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">offset</text><text x="446" y="441" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="103">window_end_offset</text><text x="468" y="454" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="146">type=PARAMETERS_CONTINUE</text><text x="443" y="467" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="97">(max_chunk_size)</text><text x="434" y="480" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="79">(chunk_delay)</text><path fill="none" stroke="#000" d="M 187 549 L 363 549"/><polygon fill="#000" stroke="#000" points="355 545 363 549 355 553"/><polygon fill="#F0F8FF" stroke="#000" points="36 522 155 522 163 530 163 576 36 576 36 522"/><path fill="none" stroke="#000" d="M 155 522 L 155 530"/><path fill="none" stroke="#000" d="M 155 530 L 163 530"/><text x="77" y="535" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="62" y="548" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37">offset</text><text x="56" y="561" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="25">data</text><text x="95" y="574" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="103">remaining_bytes=0</text><path fill="none" stroke="#000" d="M 187 631 L 363 631"/><polygon fill="#000" stroke="#000" points="195 627 187 631 195 635"/><polygon fill="#F0F8FF" stroke="#000" points="387 617 470 617 478 625 478 645 387 645 387 617"/><path fill="none" stroke="#000" d="M 470 617 L 470 625"/><path fill="none" stroke="#000" d="M 470 625 L 478 625"/><text x="428" y="630" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">transfer_id</text><text x="422" y="643" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="55">status=OK</text><text x="206" y="132" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="31">start</text><text x="293" y="226" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="140">set transfer parameters</text><text x="236" y="320" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91">requested bytes</text><text x="255" y="333" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="128">(zero or more chunks)</text><text x="284" y="427" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="158">update transfer parameters</text><text x="329" y="440" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">(as needed)</text><text x="224" y="547" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="67">final chunk</text><text x="296" y="629" fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="134">acknowledge completion</text></svg>